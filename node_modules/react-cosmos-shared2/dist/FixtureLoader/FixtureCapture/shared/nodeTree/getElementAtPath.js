"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getElementAtPath = getElementAtPath;
exports.getExpectedElementAtPath = getExpectedElementAtPath;

var _lodash = require("lodash");

var _react = require("../../../../react");

var _shared = require("./shared");

// Why be silent about trying to fetch a node that isn't an element?
// Because users of this utility only care about elements. Whether the child
// node was removed or replaced by a different type of node (eg. string,
// array of elements, etc.) is irrelevant.
// NICETOHAVE: Assert child path validity
function getElementAtPath(node, elPath) {
  if (!(0, _react.isReactElement)(node) && !Array.isArray(node)) {
    return null;
  }

  var rootNode = node;
  var childNode = (0, _shared.isRootPath)(elPath) ? rootNode : (0, _lodash.get)(rootNode, elPath);

  if (!(0, _react.isReactElement)(childNode)) {
    return null;
  }

  return childNode;
}

function getExpectedElementAtPath(node, elPath) {
  var el = getElementAtPath(node, elPath);

  if (!el) {
    throw new Error("Element not found at path: ".concat(elPath));
  }

  return el;
}
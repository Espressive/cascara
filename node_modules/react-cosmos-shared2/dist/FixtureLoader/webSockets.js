"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createWebSocketsConnect = createWebSocketsConnect;

var _socket = _interopRequireDefault(require("socket.io-client"));

var _renderer = require("../renderer");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function createWebSocketsConnect(url) {
  var socket = (0, _socket.default)(url);
  return {
    postMessage: function postMessage(msg) {
      socket.emit(_renderer.RENDERER_MESSAGE_EVENT_NAME, msg);
    },
    onMessage: function onMessage(_onMessage) {
      socket.on(_renderer.RENDERER_MESSAGE_EVENT_NAME, _onMessage);
      return function () {
        return socket.off(_renderer.RENDERER_MESSAGE_EVENT_NAME, _onMessage);
      };
    }
  };
}
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.extendWithValues = extendWithValues;
exports.extendWithValue = extendWithValue;

var _shared = require("./shared");

// Use fixture state for serializable values and fall back to base values
function extendWithValues(obj, values) {
  var extendedObj = {};
  Object.keys(values).forEach(function (key) {
    extendedObj[key] = extendWithValue(obj[key], values[key]);
  });
  return extendedObj;
}

function extendWithValue(data, value) {
  if (value.type === 'unserializable') return data;

  if (value.type === 'object') {
    var obj = (0, _shared.isObject)(data) ? data : {};
    return extendWithValues(obj, value.values);
  }

  if (value.type === 'array') {
    var array = (0, _shared.isArray)(data) ? data : [];
    return value.values.map(function (v, idx) {
      return extendWithValue(array[idx], v);
    });
  }

  return value.data;
}
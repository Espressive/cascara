"use strict";

exports.__esModule = true;
exports.chatMessageBehavior = void 0;

var _keyboardKey = require("../../keyboard-key");

var _attributes = require("../../attributes");

var _types = require("../../focusZone/types");

/**
 * @description
 * Sets the message to be a focusable element.
 * Adds a vertical circular focus zone navigation where a user navigates using a Tab key.
 * Adds a key action which prevents up and down arrow keys from navigating in FocusZone, we only want a Tab key to navigate.
 * Adds an escape key action which focuses the chat message, i.e., moves key handling from inside a message back to the chat list.
 *
 * @specification
 * Provides arrow key navigation in vertical direction.
 * Keyboard navigation is circular.
 * Focus is moved within the focusable children of the component using TAB key.
 * Does not handle PageDown and PageUp.
 */
var chatMessageBehavior = function chatMessageBehavior(props) {
  var _Object$assign;

  return {
    attributes: {
      root: Object.assign((_Object$assign = {}, _Object$assign[_attributes.IS_FOCUSABLE_ATTRIBUTE] = true, _Object$assign.tabIndex = -1, _Object$assign), props.hasActionMenu && !props.inlineActionMenu && {
        'aria-owns': props.actionMenuId
      })
    },
    focusZone: {
      props: {
        handleTabKey: _types.FocusZoneTabbableElements.all,
        isCircularNavigation: true,
        direction: _types.FocusZoneDirection.vertical,
        pagingSupportDisabled: true
      }
    },
    keyActions: {
      root: {
        // prevents default FocusZone behavior, in this case, prevents using arrow keys as navigation (we only want a Tab key to navigate)
        preventDefault: {
          keyCombinations: [{
            keyCode: _keyboardKey.keyboardKey.ArrowUp
          }, {
            keyCode: _keyboardKey.keyboardKey.ArrowDown
          }]
        },
        focus: {
          keyCombinations: [{
            keyCode: _keyboardKey.keyboardKey.Escape
          }]
        }
      }
    }
  };
};

exports.chatMessageBehavior = chatMessageBehavior;
//# sourceMappingURL=chatMessageBehavior.js.map

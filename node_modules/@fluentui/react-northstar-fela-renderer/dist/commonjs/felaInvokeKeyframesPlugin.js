"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.felaInvokeKeyframesPlugin = void 0;

var _isPlainObject2 = _interopRequireDefault(require("lodash/isPlainObject"));

var _styles = require("@fluentui/styles");

/**
 * Fela plugin for invoking keyframes with params. The keyframes, defined in the animationName prop,
 * are called with the params object, if defined in the animationName prop.
 *
 * Caution! Infinite recursion is possible in case if style object has links to self in the props
 * tree.
 */
var felaInvokeKeyframesPlugin = function felaInvokeKeyframesPlugin(styles) {
  return Object.keys(styles).reduce(function (acc, cssPropertyName) {
    var _Object$assign3;

    var cssPropertyValue = styles[cssPropertyName];

    if ((0, _isPlainObject2.default)(cssPropertyValue)) {
      var _Object$assign2;

      if (cssPropertyName === 'animationName') {
        var _Object$assign;

        var animationDefinition = cssPropertyValue;

        if (animationDefinition.keyframe) {
          styles[cssPropertyName] = (0, _styles.callable)(animationDefinition.keyframe)(animationDefinition.params || {});
        }

        return Object.assign({}, acc, (_Object$assign = {}, _Object$assign[cssPropertyName] = styles[cssPropertyName], _Object$assign));
      }

      return Object.assign({}, acc, (_Object$assign2 = {}, _Object$assign2[cssPropertyName] = felaInvokeKeyframesPlugin(cssPropertyValue), _Object$assign2));
    }

    return Object.assign({}, acc, (_Object$assign3 = {}, _Object$assign3[cssPropertyName] = styles[cssPropertyName], _Object$assign3));
  }, {});
};

exports.felaInvokeKeyframesPlugin = felaInvokeKeyframesPlugin;
//# sourceMappingURL=felaInvokeKeyframesPlugin.js.map

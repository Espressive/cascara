"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.felaInvokeKeyframesPlugin = void 0;
var tslib_1 = require("tslib");
var styles_1 = require("@fluentui/styles");
var _ = require("lodash");
/**
 * Fela plugin for invoking keyframes with params. The keyframes, defined in the animationName prop,
 * are called with the params object, if defined in the animationName prop.
 *
 * Caution! Infinite recursion is possible in case if style object has links to self in the props
 * tree.
 */
var felaInvokeKeyframesPlugin = function (styles) {
    return Object.keys(styles).reduce(function (acc, cssPropertyName) {
        var _a, _b, _c;
        var cssPropertyValue = styles[cssPropertyName];
        if (_.isPlainObject(cssPropertyValue)) {
            if (cssPropertyName === 'animationName') {
                var animationDefinition = cssPropertyValue;
                if (animationDefinition.keyframe) {
                    styles[cssPropertyName] = styles_1.callable(animationDefinition.keyframe)(animationDefinition.params || {});
                }
                return tslib_1.__assign(tslib_1.__assign({}, acc), (_a = {}, _a[cssPropertyName] = styles[cssPropertyName], _a));
            }
            return tslib_1.__assign(tslib_1.__assign({}, acc), (_b = {}, _b[cssPropertyName] = exports.felaInvokeKeyframesPlugin(cssPropertyValue), _b));
        }
        return tslib_1.__assign(tslib_1.__assign({}, acc), (_c = {}, _c[cssPropertyName] = styles[cssPropertyName], _c));
    }, {});
};
exports.felaInvokeKeyframesPlugin = felaInvokeKeyframesPlugin;

{"version":3,"sources":["FocusZone/AutoFocusZone.tsx"],"names":["AutoFocusZone","root","React","createRef","findElementAndFocusAsync","current","firstFocusableSelector","props","focusSelector","firstFocusableChild","querySelector","firstChild","componentDidMount","render","unhandledProps","handledProps","ElementType","children","Component","propTypes","as","PropTypes","elementType","oneOfType","func","string"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AAEA;;AAEA;IACaA,a;;;;;;;;;;;UACXC,I,gBAAOC,KAAK,CAACC,SAAN,E;;UAwBPC,wB,GAA2B,YAAM;AAC/B,UAAI,CAAC,MAAKH,IAAL,CAAUI,OAAf,EAAwB;AADO,UAEvBC,sBAFuB,GAEI,MAAKC,KAFT,CAEvBD,sBAFuB;AAI/B,UAAME,aAAa,GAAG,sBAASF,sBAAT,GAAtB;AAEA,UAAMG,mBAAmB,GAAGD,aAAa,GACpC,MAAKP,IAAL,CAAUI,OAAV,CAAkBK,aAAlB,CAAgCF,aAAhC,CADoC,GAErC,oCAAe,MAAKP,IAAL,CAAUI,OAAzB,EAAkC,MAAKJ,IAAL,CAAUI,OAAV,CAAkBM,UAApD,EAA+E,IAA/E,EAAqF,KAArF,EAA4F,KAA5F,EAAmG,IAAnG,CAFJ;AAIAF,MAAAA,mBAAmB,IAAI,gCAAWA,mBAAX,CAAvB;AACD,K;;;;;;;SA1BDG,iB,GAAA,6BAA0B;AACxB,SAAKR,wBAAL;AACD,G;;SAEDS,M,GAAA,kBAAsB;AACpB,QAAMC,cAAc,GAAG,0CAAkBd,aAAa,CAACe,YAAhC,EAA8C,KAAKR,KAAnD,CAAvB;AACA,QAAMS,WAAW,GAAG,oCAAe,KAAKT,KAApB,CAApB;AAEA,wBACE,oBAAC,sBAAD;AAAK,MAAA,QAAQ,EAAE,KAAKN;AAApB,oBACE,oBAAC,WAAD,EAAiBa,cAAjB,EAAkC,KAAKP,KAAL,CAAWU,QAA7C,CADF,CADF;AAKD,G;;;EAvBgCf,KAAK,CAACgB,S;;;AAA5BlB,a,CAGJmB,S,GAAY;AACjBC,EAAAA,EAAE,EAAEC,SAAS,CAACC,WADG;AAEjBhB,EAAAA,sBAAsB,EAAEe,SAAS,CAACE,SAAV,CAAoB,CAACF,SAAS,CAACG,IAAX,EAAiBH,SAAS,CAACI,MAA3B,CAApB;AAFP,C;AAHRzB,a,CAQJe,Y,GAAe,oBAAOf,aAAa,CAACmB,SAArB,C","sourcesContent":["import { Ref } from '@fluentui/react-component-ref';\nimport { callable } from '@fluentui/styles';\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\n\nimport { getElementType } from '../utils/getElementType';\nimport { getUnhandledProps } from '../utils/getUnhandledProps';\nimport { AutoFocusZoneProps } from './AutoFocusZone.types';\nimport { getNextElement, focusAsync } from './focusUtilities';\n\n/** AutoFocusZone is used to focus inner element on mount. */\nexport class AutoFocusZone extends React.Component<AutoFocusZoneProps> {\n  root = React.createRef<HTMLElement>();\n\n  static propTypes = {\n    as: PropTypes.elementType,\n    firstFocusableSelector: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  };\n\n  static handledProps = _.keys(AutoFocusZone.propTypes) as any;\n\n  componentDidMount(): void {\n    this.findElementAndFocusAsync();\n  }\n\n  render(): JSX.Element {\n    const unhandledProps = getUnhandledProps(AutoFocusZone.handledProps, this.props);\n    const ElementType = getElementType(this.props);\n\n    return (\n      <Ref innerRef={this.root}>\n        <ElementType {...unhandledProps}>{this.props.children}</ElementType>\n      </Ref>\n    );\n  }\n\n  findElementAndFocusAsync = () => {\n    if (!this.root.current) return;\n    const { firstFocusableSelector } = this.props;\n\n    const focusSelector = callable(firstFocusableSelector)();\n\n    const firstFocusableChild = focusSelector\n      ? (this.root.current.querySelector(focusSelector) as HTMLElement)\n      : getNextElement(this.root.current, this.root.current.firstChild as HTMLElement, true, false, false, true);\n\n    firstFocusableChild && focusAsync(firstFocusableChild);\n  };\n}\n"],"file":"AutoFocusZone.js"}
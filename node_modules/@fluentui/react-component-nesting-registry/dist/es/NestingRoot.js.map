{"version":3,"sources":["NestingRoot.tsx"],"names":["React","RefStack","NestingContext","NestingRoot","registry","parentRef","createRef","getRefs","getContextRefs","componentDidMount","register","componentWillUnmount","unregister","render","props","children","Component"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,cAAT,QAA+B,kBAA/B;AAGA,WAAaC,WAAb;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,UACEC,QADF,GACa,IAAIH,QAAJ,EADb;AAAA,UAEEI,SAFF,gBAEcL,KAAK,CAACM,SAAN,EAFd;;AAAA,UAYEC,OAZF,GAYY;AAAA,aAAiB,MAAKH,QAAL,CAAcI,cAAd,CAA6B,MAAKH,SAAlC,CAAjB;AAAA,KAZZ;;AAAA;AAAA;;AAAA;;AAAA,SAIEI,iBAJF,GAIE,6BAAoB;AAClB,SAAKL,QAAL,CAAcM,QAAd,CAAuB,KAAKL,SAA5B;AACD,GANH;;AAAA,SAQEM,oBARF,GAQE,gCAAuB;AACrB,SAAKP,QAAL,CAAcQ,UAAd,CAAyB,KAAKP,SAA9B;AACD,GAVH;;AAAA,SAcEQ,MAdF,GAcE,kBAAS;AACP,wBACE,oBAAC,cAAD,CAAgB,QAAhB;AAAyB,MAAA,KAAK,EAAE,KAAKT;AAArC,OACG,KAAKU,KAAL,CAAWC,QAAX,CAAoB,KAAKR,OAAzB,EAAkC,KAAKF,SAAvC,CADH,CADF;AAKD,GApBH;;AAAA;AAAA,EAAiDL,KAAK,CAACgB,SAAvD","sourcesContent":["import * as React from 'react';\n\nimport { RefStack } from './utils/RefStack';\nimport { NestingContext } from './NestingContext';\nimport { NestingProps, NodeRef } from './types';\n\nexport class NestingRoot<T extends Node> extends React.Component<NestingProps> {\n  registry = new RefStack();\n  parentRef = React.createRef<T>();\n\n  componentDidMount() {\n    this.registry.register(this.parentRef as any);\n  }\n\n  componentWillUnmount() {\n    this.registry.unregister(this.parentRef as any);\n  }\n\n  getRefs = (): NodeRef[] => this.registry.getContextRefs(this.parentRef as any);\n\n  render() {\n    return (\n      <NestingContext.Provider value={this.registry}>\n        {this.props.children(this.getRefs, this.parentRef as any)}\n      </NestingContext.Provider>\n    );\n  }\n}\n"],"file":"NestingRoot.js"}
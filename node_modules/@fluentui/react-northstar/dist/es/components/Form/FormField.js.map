{"version":3,"sources":["components/Form/FormField.tsx"],"names":["formFieldBehavior","customPropTypes","PropTypes","React","childrenExist","createShorthandFactory","commonPropTypes","getOrGenerateIdFromShorthand","Text","Input","Box","getElementType","useUnhandledProps","useFluentContext","useTelemetry","useStyles","useAccessibility","formFieldClassName","formFieldMessageClassName","FormField","props","context","displayName","telemetry","setStart","setEnd","children","control","id","label","message","name","required","type","className","design","styles","variables","inline","errorMessage","ElementType","unhandledProps","handledProps","messageId","useRef","current","labelId","getA11yProps","accessibility","debugName","mapPropsToBehavior","hasErrorMessage","rtl","mapPropsToStyles","mapPropsToInlineStyles","classes","resolvedStyles","labelElement","create","defaultProps","as","htmlFor","messageElement","controlElement","error","shouldControlAppearFirst","content","element","root","propTypes","createCommon","shorthandAllowingChildren","string","bool","itemShorthand","Object","keys","Component","mappedProp"],"mappings":"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","sourcesContent":["import { Accessibility, FormFieldBehaviorProps, formFieldBehavior } from '@fluentui/accessibility';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport {\n  childrenExist,\n  createShorthandFactory,\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  getOrGenerateIdFromShorthand,\n} from '../../utils';\nimport { ShorthandValue, FluentComponentStaticProps } from '../../types';\nimport { Text, TextProps } from '../Text/Text';\nimport { Input } from '../Input/Input';\nimport { Box, BoxProps } from '../Box/Box';\nimport {\n  ComponentWithAs,\n  getElementType,\n  useUnhandledProps,\n  useFluentContext,\n  useTelemetry,\n  useStyles,\n  useAccessibility,\n} from '@fluentui/react-bindings';\n\nexport interface FormFieldProps extends UIComponentProps, ChildrenComponentProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   */\n  accessibility?: Accessibility<FormFieldBehaviorProps>;\n\n  /**\n   * @deprecated\n   * A control for the form field.\n   */\n  control?: ShorthandValue<BoxProps>;\n\n  /** The HTML input id. This will be set on the control element and will be use for linking it with the label for correct accessibility. */\n  id?: string;\n\n  /** A field can have its label next to instead of above it. */\n  inline?: boolean;\n\n  /** A label for the form field. */\n  label?: ShorthandValue<TextProps>;\n\n  /** Text message that will be displayed below the control (can be used for error, warning, success messages). */\n  message?: ShorthandValue<TextProps>;\n\n  /** The HTML input name. */\n  name?: string;\n\n  /** A field can show that input is mandatory. */\n  required?: boolean;\n\n  /** The HTML input type. */\n  type?: string;\n\n  /** Message to be shown when input has error */\n  errorMessage?: ShorthandValue<TextProps>;\n}\n\nexport const formFieldClassName = 'ui-form__field';\nexport const formFieldMessageClassName = 'ui-form__field__message';\n\nexport type FormFieldStylesProps = Required<Pick<FormFieldProps, 'type' | 'inline' | 'required'>> & {\n  hasErrorMessage: boolean;\n};\n\n/**\n * A FormField represents a Form element containing a label and an input.\n */\nexport const FormField: ComponentWithAs<'div', FormFieldProps> & FluentComponentStaticProps<FormFieldProps> = props => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(FormField.displayName, context.telemetry);\n  setStart();\n\n  const {\n    children,\n    control,\n    id,\n    label,\n    message,\n    name,\n    required,\n    type,\n    className,\n    design,\n    styles,\n    variables,\n    inline,\n    errorMessage,\n  } = props;\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(FormField.handledProps, props);\n  const messageId = React.useRef<string>();\n  messageId.current = getOrGenerateIdFromShorthand('error-message-', message || errorMessage, messageId.current);\n  const labelId = React.useRef<string>();\n  labelId.current = getOrGenerateIdFromShorthand('form-label-', id, labelId.current);\n\n  const getA11yProps = useAccessibility<FormFieldBehaviorProps>(props.accessibility, {\n    debugName: FormField.displayName,\n    mapPropsToBehavior: () => ({\n      hasErrorMessage: !!errorMessage,\n      messageId: messageId.current,\n      labelId: labelId.current,\n    }),\n    rtl: context.rtl,\n  });\n\n  const { classes, styles: resolvedStyles } = useStyles<FormFieldStylesProps>(FormField.displayName, {\n    className: formFieldClassName,\n    mapPropsToStyles: () => ({\n      type,\n      inline,\n      required,\n      hasErrorMessage: !!errorMessage,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const labelElement = Text.create(label, {\n    defaultProps: () =>\n      getA11yProps('label', {\n        as: 'label',\n        htmlFor: id,\n        id: labelId.current,\n        styles: resolvedStyles.label,\n      }),\n  });\n\n  const messageElement = Text.create(errorMessage || message, {\n    defaultProps: () =>\n      getA11yProps('message', {\n        className: formFieldMessageClassName,\n        id: messageId.current,\n        styles: resolvedStyles.message,\n      }),\n  });\n\n  const controlElement = Box.create(control || {}, {\n    defaultProps: () =>\n      getA11yProps('control', {\n        required,\n        name,\n        id,\n        type,\n        error: !!errorMessage || null,\n        styles: resolvedStyles.control,\n      }),\n  });\n\n  const shouldControlAppearFirst = () => {\n    return type && (type === 'checkbox' || type === 'radio');\n  };\n\n  const content = (\n    <>\n      {shouldControlAppearFirst() && controlElement}\n      {labelElement}\n      {!shouldControlAppearFirst() && controlElement}\n      {messageElement}\n    </>\n  );\n\n  const element = (\n    <ElementType\n      {...getA11yProps('root', {\n        className: classes.root,\n        ...unhandledProps,\n      })}\n    >\n      {childrenExist(children) ? children : content}\n    </ElementType>\n  );\n  setEnd();\n  return element;\n};\n\nFormField.displayName = 'FormField';\n\nFormField.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  control: customPropTypes.shorthandAllowingChildren,\n  id: PropTypes.string,\n  inline: PropTypes.bool,\n  label: customPropTypes.itemShorthand,\n  message: customPropTypes.itemShorthand,\n  name: PropTypes.string,\n  required: PropTypes.bool,\n  type: PropTypes.string,\n  errorMessage: customPropTypes.shorthandAllowingChildren,\n};\n\nFormField.handledProps = Object.keys(FormField.propTypes) as any;\n\nFormField.defaultProps = {\n  accessibility: formFieldBehavior,\n  control: { as: Input },\n};\n\nFormField.create = createShorthandFactory({ Component: FormField, mappedProp: 'label' });\n"],"file":"FormField.js"}
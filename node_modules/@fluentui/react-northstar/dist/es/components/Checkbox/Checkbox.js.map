{"version":3,"sources":["components/Checkbox/Checkbox.tsx"],"names":["checkboxBehavior","getElementType","useUnhandledProps","useAccessibility","useStateManager","useFluentContext","useStyles","useTelemetry","customPropTypes","createCheckboxManager","PropTypes","React","createShorthandFactory","commonPropTypes","Box","Text","checkboxClassName","checkboxSlotClassNames","label","indicator","Checkbox","props","context","displayName","telemetry","setStart","setEnd","checked","className","defaultChecked","design","disabled","labelPosition","styles","toggle","variables","mapPropsToInitialState","mapPropsToState","state","actions","getA11Props","accessibility","debugName","mapPropsToBehavior","actionHandlers","performClick","e","preventDefault","handleClick","rtl","mapPropsToStyles","mapPropsToInlineStyles","classes","resolvedStyles","ElementType","unhandledProps","handledProps","handleChange","labelElement","create","defaultProps","element","root","onClick","onChange","checkbox","propTypes","createCommon","content","oneOf","bool","shorthandAllowingChildren","itemShorthand","func","Object","keys","Component","mappedProp"],"mappings":"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","sourcesContent":["import { Accessibility, checkboxBehavior, CheckboxBehaviorProps } from '@fluentui/accessibility';\nimport {\n  ComponentWithAs,\n  getElementType,\n  useUnhandledProps,\n  useAccessibility,\n  useStateManager,\n  useFluentContext,\n  useStyles,\n  useTelemetry,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport { createCheckboxManager } from '@fluentui/state';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { createShorthandFactory, ChildrenComponentProps, commonPropTypes, UIComponentProps } from '../../utils';\nimport { ComponentEventHandler, ShorthandValue, FluentComponentStaticProps } from '../../types';\nimport { Box, BoxProps } from '../Box/Box';\nimport { Text, TextProps } from '../Text/Text';\nimport { SupportedIntrinsicInputProps } from '../../utils/htmlPropsUtils';\n\nexport interface CheckboxSlotClassNames {\n  label: string;\n  indicator: string;\n}\n\nexport interface CheckboxProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<CheckboxBehaviorProps>;\n\n  /** A checkbox can be checked by default. */\n  defaultChecked?: SupportedIntrinsicInputProps['defaultChecked'];\n\n  /** A checkbox's checked state can be controlled. */\n  checked?: SupportedIntrinsicInputProps['checked'] | 'mixed';\n\n  /** A checkbox can appear disabled and be unable to change states. */\n  disabled?: SupportedIntrinsicInputProps['disabled'];\n\n  /** A checkbox's indicator icon can be customized. */\n  indicator?: ShorthandValue<BoxProps>;\n\n  /** A checkbox can render a label next to its indicator. */\n  label?: ShorthandValue<TextProps>;\n\n  /** A checkbox's label can be rendered in different positions. */\n  labelPosition?: 'start' | 'end';\n\n  /**\n   * Called after a checkbox's checked state is changed.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onChange?: ComponentEventHandler<Omit<CheckboxProps, 'checked'> & { checked: boolean }>;\n\n  /**\n   * Called after a checkbox is clicked.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onClick?: ComponentEventHandler<Omit<CheckboxProps, 'checked'> & { checked: boolean }>;\n\n  /** A checkbox can be formatted to show an \"on or off\" choice. */\n  toggle?: boolean;\n}\n\nexport type CheckboxStylesProps = Pick<CheckboxProps, 'checked' | 'disabled' | 'labelPosition' | 'toggle'>;\nexport const checkboxClassName = 'ui-checkbox';\nexport const checkboxSlotClassNames: CheckboxSlotClassNames = {\n  label: `${checkboxClassName}__label`,\n  indicator: `${checkboxClassName}__indicator`,\n};\n\n/**\n * A Checkbox allows a user to make a choice between two mutually exclusive options.\n *\n * @accessibility\n * Implements [ARIA Checkbox](https://www.w3.org/TR/wai-aria-practices-1.1/#checkbox) design pattern.\n */\nexport const Checkbox: ComponentWithAs<'div', CheckboxProps> & FluentComponentStaticProps<CheckboxProps> = props => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Checkbox.displayName, context.telemetry);\n  setStart();\n\n  const {\n    checked,\n    className,\n    defaultChecked,\n    design,\n    disabled,\n    label,\n    labelPosition,\n    indicator,\n    styles,\n    toggle,\n    variables,\n  } = props;\n\n  const { state, actions } = useStateManager(createCheckboxManager, {\n    mapPropsToInitialState: () => ({ checked: defaultChecked }),\n    mapPropsToState: () => ({ checked: checked === 'mixed' ? false : checked }),\n  });\n\n  const getA11Props = useAccessibility(props.accessibility, {\n    debugName: Checkbox.displayName,\n    mapPropsToBehavior: () => ({\n      checked: state.checked,\n      disabled,\n    }),\n    actionHandlers: {\n      performClick: (e: React.KeyboardEvent) => {\n        e.preventDefault();\n        handleClick(e);\n      },\n    },\n    rtl: context.rtl,\n  });\n\n  const { classes, styles: resolvedStyles } = useStyles<CheckboxStylesProps>(Checkbox.displayName, {\n    className: checkboxClassName,\n    mapPropsToStyles: () => ({\n      checked: checked === 'mixed' ? 'mixed' : state.checked,\n      disabled,\n      labelPosition,\n      toggle,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Checkbox.handledProps, props);\n\n  const handleChange = (e: React.ChangeEvent) => {\n    if (!disabled) {\n      // Checkbox component doesn't present any `input` component in markup, however all of our\n      // components should handle events transparently.\n      const checked = !state.checked;\n\n      actions.toggle(checked);\n      _.invoke(props, 'onChange', e, { ...props, checked });\n    }\n  };\n\n  const handleClick = (e: React.MouseEvent | React.KeyboardEvent) => {\n    if (!disabled) {\n      const checked = !state.checked;\n      actions.toggle(checked);\n\n      _.invoke(props, 'onClick', e, { ...props, checked });\n      _.invoke(props, 'onChange', e, { ...props, checked });\n    }\n  };\n\n  const labelElement = Text.create(label, {\n    defaultProps: () =>\n      getA11Props('label', {\n        styles: resolvedStyles.label,\n        className: checkboxSlotClassNames.label,\n      }),\n  });\n\n  const element = (\n    <ElementType\n      {...getA11Props('root', {\n        className: classes.root,\n        onClick: handleClick,\n        onChange: handleChange,\n        ...unhandledProps,\n      })}\n    >\n      {labelPosition === 'start' && labelElement}\n      {Box.create(indicator, {\n        defaultProps: () =>\n          getA11Props('indicator', {\n            className: checkboxSlotClassNames.indicator,\n            styles: toggle ? resolvedStyles.toggle : resolvedStyles.checkbox,\n          }),\n      })}\n      {labelPosition === 'end' && labelElement}\n    </ElementType>\n  );\n  setEnd();\n\n  return element;\n};\n\nCheckbox.displayName = 'Checkbox';\n\nCheckbox.defaultProps = {\n  accessibility: checkboxBehavior,\n  indicator: {},\n  labelPosition: 'end',\n};\nCheckbox.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  checked: PropTypes.oneOf([true, false, 'mixed']),\n  defaultChecked: PropTypes.bool,\n  disabled: PropTypes.bool,\n  indicator: customPropTypes.shorthandAllowingChildren,\n  label: customPropTypes.itemShorthand,\n  labelPosition: PropTypes.oneOf(['start', 'end']),\n  onChange: PropTypes.func,\n  onClick: PropTypes.func,\n  toggle: PropTypes.bool,\n};\nCheckbox.handledProps = Object.keys(Checkbox.propTypes) as any;\n\nCheckbox.create = createShorthandFactory({\n  Component: Checkbox,\n  mappedProp: 'label',\n});\n"],"file":"Checkbox.js"}
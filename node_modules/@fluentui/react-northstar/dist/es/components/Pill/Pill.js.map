{"version":3,"sources":["components/Pill/Pill.tsx"],"names":["PropTypes","React","customPropTypes","pillBehavior","commonPropTypes","createShorthand","useAccessibility","getElementType","useStyles","useTelemetry","useFluentContext","useUnhandledProps","useAutoControlled","PillContent","PillAction","usePillContext","PillImage","PillIcon","CheckmarkCircleIcon","AcceptIcon","pillClassName","Pill","props","context","displayName","telemetry","setStart","setEnd","parentProps","className","design","styles","variables","appearance","size","rectangular","children","content","disabled","action","actionable","image","icon","selectable","selectedIndicator","defaultValue","defaultSelected","value","selected","initialValue","setSelected","ElementType","unhandledProps","handledProps","handleDismiss","e","handleClick","prevSelected","getA11yProps","accessibility","debugName","actionHandlers","performDismiss","performClick","mapPropsToBehavior","rtl","mapPropsToStyles","mapPropsToInlineStyles","classes","getSelectedIndicator","element","unstable_wrapWithFocusZone","root","onClick","defaultProps","overrideProps","prevProps","as","propTypes","createCommon","shorthandAllowingChildren","oneOf","bool","onDismiss","func","Object","keys"],"mappings":"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","sourcesContent":["import * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport { Accessibility, pillBehavior, PillBehaviorProps } from '@fluentui/accessibility';\nimport { UIComponentProps, ContentComponentProps, commonPropTypes, SizeValue, createShorthand } from '../../utils';\nimport { ShorthandValue, FluentComponentStaticProps, ComponentEventHandler } from '../../types';\nimport { BoxProps } from '../Box/Box';\n\nimport {\n  ComponentWithAs,\n  useAccessibility,\n  getElementType,\n  useStyles,\n  useTelemetry,\n  useFluentContext,\n  useUnhandledProps,\n  useAutoControlled,\n} from '@fluentui/react-bindings';\nimport { PillContent } from './PillContent';\nimport { PillActionProps, PillAction } from './PillAction';\nimport { usePillContext } from './pillContext';\nimport { PillImageProps, PillImage } from './PillImage';\nimport { PillIcon, PillIconProps } from './PillIcon';\nimport { CheckmarkCircleIcon, AcceptIcon } from '@fluentui/react-icons-northstar';\n\nexport interface PillProps extends UIComponentProps, ContentComponentProps<ShorthandValue<BoxProps>> {\n  /**\n   * Accessibility behavior if overridden by the user.\n   */\n  accessibility?: Accessibility<PillBehaviorProps>;\n\n  /**\n   * A Pill can be sized.\n   */\n  size?: Extract<SizeValue, 'smaller' | 'small' | 'medium'>;\n\n  /**\n   * A Pill can be rectangular\n   */\n  rectangular?: boolean;\n\n  /**\n   * A Pill can be filled, inverted or outline\n   */\n  appearance?: 'filled' | 'inverted' | 'outline';\n\n  /**\n   * A Pill can be disbled\n   */\n  disabled?: boolean;\n\n  /**\n   * A Pill can be actionable\n   */\n  actionable?: boolean;\n\n  /**\n   * A PillAction shorthand for the action slot.\n   */\n  action?: ShorthandValue<PillActionProps>;\n\n  /**\n   * A PillAction shorthand for the action slot.\n   */\n  icon?: ShorthandValue<PillIconProps>;\n\n  /**\n   * A PillImage shorthand for the image slot.\n   */\n  image?: ShorthandValue<PillImageProps>;\n\n  /**\n   * Called after user will dismiss the Pill.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onDismiss?: ComponentEventHandler<PillProps>;\n\n  /**\n   * A Pill can be selectable\n   */\n  selectable?: boolean;\n\n  /**\n   * A Pill state for selection\n   */\n  selected?: boolean;\n\n  /**\n   * A Pill can be selected by default\n   */\n  defaultSelected?: boolean;\n\n  /**\n   * A Pill can have custom selected indicator\n   */\n  selectedIndicator?: ShorthandValue<PillIconProps>;\n\n  /**\n   * Called after user change selected state\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onSelectionChange?: ComponentEventHandler<PillProps>;\n}\n\nexport type PillStylesProps = Required<\n  Pick<PillProps, 'appearance' | 'size' | 'rectangular' | 'disabled' | 'selectable' | 'selected'>\n>;\n\nexport const pillClassName = 'ui-pill';\n\n/**\n * THIS COMPONENT IS UNSTABLE\n * Pills should be used when representing an input, as a way to filter content, or to represent an attribute.\n */\nexport const Pill: ComponentWithAs<'span', PillProps> & FluentComponentStaticProps<PillProps> = props => {\n  const context = useFluentContext();\n  const { setStart, setEnd } = useTelemetry(Pill.displayName, context.telemetry);\n  setStart();\n\n  const parentProps = usePillContext();\n\n  const {\n    className,\n    design,\n    styles,\n    variables,\n    appearance,\n    size,\n    rectangular,\n    children,\n    content,\n    disabled,\n    action,\n    actionable,\n    image,\n    icon,\n    selectable,\n    selectedIndicator,\n  } = props;\n\n  const [selected, setSelected] = useAutoControlled({\n    defaultValue: props.defaultSelected,\n    value: props.selected,\n    initialValue: false,\n  });\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Pill.handledProps, props);\n\n  const handleDismiss = e => {\n    _.invoke(props, 'onDismiss', e, props);\n  };\n\n  const handleClick = e => {\n    if (selectable) {\n      setSelected(prevSelected => !prevSelected);\n      _.invoke(props, 'onSelectionChange', e, { ...props, selected: !selected });\n    }\n    _.invoke(props, 'onClick', e, props);\n  };\n\n  const getA11yProps = useAccessibility(props.accessibility || parentProps.pillBehavior || pillBehavior, {\n    debugName: Pill.displayName,\n    actionHandlers: {\n      performDismiss: handleDismiss,\n      performClick: handleClick,\n    },\n    mapPropsToBehavior: () => ({\n      actionable,\n      selectable,\n      selected,\n    }),\n    rtl: context.rtl,\n  });\n\n  const { classes } = useStyles<PillStylesProps>(Pill.displayName, {\n    className: pillClassName,\n    mapPropsToStyles: () => ({\n      appearance,\n      size,\n      rectangular,\n      disabled,\n      selectable,\n      selected,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const getSelectedIndicator: () => ShorthandValue<PillIconProps> = () => {\n    if (!!selectedIndicator) {\n      return selectedIndicator;\n    }\n\n    if (!!image) {\n      return <CheckmarkCircleIcon />;\n    }\n\n    return <AcceptIcon />;\n  };\n\n  const element = getA11yProps.unstable_wrapWithFocusZone(\n    <ElementType\n      {...getA11yProps('root', {\n        className: classes.root,\n        ...(actionable && { onClick: handleClick }),\n        ...unhandledProps,\n      })}\n    >\n      {selectable &&\n        selected &&\n        createShorthand(PillIcon, getSelectedIndicator(), {\n          defaultProps: () => ({ size, selectable, image }),\n        })}\n      {!selected &&\n        createShorthand(PillImage, image, {\n          defaultProps: () => ({ size }),\n        })}\n      {!selected &&\n        createShorthand(PillIcon, icon, {\n          defaultProps: () => ({ size }),\n        })}\n      {createShorthand(PillContent, content || {}, {\n        defaultProps: () => ({\n          children,\n          size,\n          actionable,\n        }),\n      })}\n      {actionable &&\n        createShorthand(PillAction, action || {}, {\n          overrideProps: (prevProps: PillActionProps & { onClick: (e: React.MouseEvent) => void }) => ({\n            onClick: e => {\n              _.invoke(prevProps, 'onClick', e);\n              handleDismiss(e);\n            },\n          }),\n        })}\n    </ElementType>,\n  );\n\n  setEnd();\n\n  return element;\n};\n\nPill.defaultProps = {\n  as: 'span',\n};\n\nPill.propTypes = {\n  ...commonPropTypes.createCommon(),\n  content: customPropTypes.shorthandAllowingChildren,\n  size: PropTypes.oneOf(['small', 'smaller', 'medium']),\n  rectangular: PropTypes.bool,\n  disabled: PropTypes.bool,\n  appearance: PropTypes.oneOf(['filled', 'inverted', 'outline']),\n  actionable: PropTypes.bool,\n  action: customPropTypes.shorthandAllowingChildren,\n  onDismiss: PropTypes.func,\n  selectedIndicator: customPropTypes.shorthandAllowingChildren,\n  selectable: PropTypes.bool,\n  selected: PropTypes.bool,\n  defaultSelected: PropTypes.bool,\n  image: customPropTypes.shorthandAllowingChildren,\n};\n\nPill.displayName = 'Pill';\n\nPill.handledProps = Object.keys(Pill.propTypes) as any;\n"],"file":"Pill.js"}
{"version":3,"file":"private.js","sources":["../../src/hooks/useBoolean.js","../../src/modules/ModuleSandbox/ModuleSandbox.js","../../src/private/Popover/Popover.js","../../src/private/ViewConfig/__globals.js","../../src/private/ViewConfig/useViewConfigState.js","../../src/private/ViewConfig/ViewConfigItem.js","../../src/private/ViewConfig/ViewConfigBase.js","../../src/private/ViewConfig/ViewConfig.js","../../src/ui/TableOld/modules/ActionEdit/ActionEdit.js"],"sourcesContent":["import { useState } from 'react';\n\nconst useBoolean = (defaultValue = false) => {\n  const [value, setValue] = useState(defaultValue);\n\n  const toggle = () => setValue(!value);\n  const setTrue = () => setValue(true);\n  const setFalse = () => setValue(false);\n\n  return [\n    value,\n    {\n      setFalse,\n      setTrue,\n      toggle,\n    },\n  ];\n};\n\nexport default useBoolean;\n","import React, { useCallback, useState } from 'react';\nimport pt from 'prop-types';\n\nimport { ModuleProvider } from '../context';\n\nconst propTypes = {\n  children: pt.oneOfType([pt.node, pt.array]),\n  isEditing: pt.bool,\n  record: pt.shape({}),\n};\n\nconst ModuleSandbox = ({ children, isEditing, record = {} }) => {\n  const [state, setState] = useState({\n    idOfRecordInEditMode: 0,\n    isEditing,\n    record,\n    uniqueIdAttribute: 'eid',\n  });\n\n  const enterEditMode = useCallback(() => {\n    if (!state?.isEditing) {\n      setState({\n        ...state,\n        isEditing: true,\n      });\n    }\n  }, [state, setState]);\n\n  const exitEditMode = useCallback(() => {\n    if (state?.isEditing) {\n      setState({\n        ...state,\n        isEditing: false,\n      });\n    }\n  }, [state, setState]);\n\n  const handleSubmit = useCallback(\n    (data) => {\n      // eslint-disable-next-line no-console -- we need this as a developer message\n      console.log('Edition completed: ', data);\n\n      setState({\n        ...state,\n        isEditing: false,\n        record: data,\n      });\n    },\n    [state, setState]\n  );\n\n  const reset = useCallback(() => {\n    // eslint-disable-next-line no-console -- we need this as a developer message\n    console.log('Edition canceled');\n  }, []);\n\n  const onAction = useCallback((action, record) => {\n    // eslint-disable-next-line no-console -- we need this as a developer message\n    console.log('Action invoked: ', action?.name, record);\n  }, []);\n\n  return (\n    <ModuleProvider\n      value={{\n        ...state,\n        enterEditMode,\n        exitEditMode,\n        formMethods: {\n          formState: {\n            isDirty: false,\n            isSubmitting: false,\n          },\n          handleSubmit,\n          reset,\n        },\n        onAction,\n      }}\n    >\n      {children}\n    </ModuleProvider>\n  );\n};\n\nModuleSandbox.propTypes = propTypes;\n\nexport default ModuleSandbox;\n","import React, { useRef } from 'react';\nimport pt from 'prop-types';\nimport {\n  PopoverBackdrop,\n  PopoverDisclosure,\n  Popover as ReakitPopover,\n  usePopoverState,\n} from 'reakit/Popover';\nimport classNames from 'classnames/bind';\nimport styles from './Popover.module.scss';\nimport { popperOverTrigger } from '../../lib/popperModifiers';\n\nconst cx = classNames.bind(styles);\n\nconst propTypes = {\n  children: pt.oneOfType([pt.arrayOf(pt.node), pt.node]),\n  className: pt.string,\n  trigger: pt.node,\n};\n\nconst Popover = ({ children, className, trigger, ...rest }) => {\n  // Set a ref on our trigger to pass into the disclosure and also measure clientHeight\n  const triggerRef = useRef();\n\n  const popover = usePopoverState({\n    gutter: 0,\n    modal: true,\n    placement: 'bottom-end',\n    unstable_popperModifiers: [popperOverTrigger],\n  });\n\n  return (\n    <>\n      <PopoverDisclosure {...popover} ref={triggerRef} {...trigger.props}>\n        {(disclosureProps) => React.cloneElement(trigger, disclosureProps)}\n      </PopoverDisclosure>\n      <ReakitPopover\n        aria-label={rest['aria-label'] ? rest['aria-label'] : 'Menu'}\n        className={cx('_', className)}\n        {...popover}\n        {...rest}\n      >\n        {children}\n      </ReakitPopover>\n      <PopoverBackdrop className={styles.Backdrop} {...popover} />\n    </>\n  );\n};\n\nPopover.propTypes = propTypes;\n\nexport default Popover;\n","import React from 'react';\nimport pt from 'prop-types';\nimport { Button } from 'reakit/Button';\nimport { InlineIcon } from '@iconify/react';\nimport { eyeIcon } from '@espressive/icons';\nimport styles from '../../shared/TempTriggerButton.module.scss';\n\nexport const DEFAULT_TRIGGER = (\n  <Button className={`${styles._} ui basic icon button`}>\n    <InlineIcon icon={eyeIcon} />\n  </Button>\n);\n\nexport const LOADING_TRIGGER = (\n  <Button className='ui basic loading icon button' disabled>\n    <InlineIcon icon={eyeIcon} />\n  </Button>\n);\n\nexport const STATE_SHAPE = pt.exact({\n  currentSelection: pt.arrayOf(pt.object),\n  itemAdd: pt.func.isRequired,\n  itemRemove: pt.func.isRequired,\n  moveItemDown: pt.func.isRequired,\n  moveItemUp: pt.func.isRequired,\n});\n\nexport const VIEW_CONFIG_PROP_TYPES = {\n  isInitialOpen: pt.bool,\n  options: pt.arrayOf(pt.object).isRequired,\n  placement: pt.oneOf(['bottom-end', 'bottom-start']),\n  state: STATE_SHAPE,\n  title: pt.string,\n  trigger: pt.node,\n};\n\nexport const LOCAL_STORAGE_KEY =\n  // This is only to make Nextjs and Vercel happy with our docs\n  typeof window !== 'undefined'\n    ? `Cascara.ViewConfig.${window.location.pathname}`\n    : 'Cascara.ViewConfig';\n","import { useState } from 'react';\nimport { useInitialValue } from 'reakit-utils';\nimport { equals, findIndex, insert, without } from 'ramda';\nimport { LOCAL_STORAGE_KEY } from './__globals';\n\n// Finds the index of a supplied object in a list\nconst getObjectIndex = (obj, list) => findIndex(equals(obj))(list);\n\n// Removes the supplied object from the supplied list\nconst getCleanList = (obj, list) => without([obj], list);\n\n// Combines both above functions to reduce boilerplate\n// in move functions\nconst getObjIndexAndCleanList = (obj, list) => ({\n  cleanList: getCleanList(obj, list),\n  prevIndex: getObjectIndex(obj, list),\n});\n\nconst useViewConfigState = (\n  { initialSelection } = { initialSelection: [] }\n) => {\n  // Parse our last filter state from localstorage which will be used to initialize state if it exists\n  const lastFilter = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n\n  // Make sure changes to our initial state after first render to not cause a render loop\n  const initial = useInitialValue(lastFilter || initialSelection);\n\n  // We have a single state that is managed with helper functions\n  // and we never expose the internal set function outside of this hook\n  const [currentSelection, setCurrentSelection] = useState(initial);\n\n  // We will set the current selection into both state and localstorage\n  const setCurrentSelectionAndStorage = (val) => {\n    setCurrentSelection(val);\n    if (val.length === 0) {\n      // We should clean up after ourselves if someone removes everything\n      localStorage.removeItem(LOCAL_STORAGE_KEY);\n    } else {\n      // Set the same value from state into the key\n      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(val));\n    }\n  };\n\n  // Adds supplied object to the bottom of the current list\n  const itemAdd = (obj) => {\n    setCurrentSelectionAndStorage([...currentSelection, obj]);\n  };\n\n  // Removes supplied object from current list\n  const itemRemove = (obj) => {\n    setCurrentSelectionAndStorage(getCleanList(obj, currentSelection));\n  };\n\n  // Moves object matching supplied object up in the list\n  const moveItemDown = (obj) => {\n    const { cleanList, prevIndex } = getObjIndexAndCleanList(\n      obj,\n      currentSelection\n    );\n\n    const newIndex = prevIndex + 1;\n\n    setCurrentSelectionAndStorage(insert(newIndex, obj, cleanList));\n  };\n\n  // Moves object matching supplied object down in the list\n  const moveItemUp = (obj) => {\n    const { cleanList, prevIndex } = getObjIndexAndCleanList(\n      obj,\n      currentSelection\n    );\n\n    const newIndex = prevIndex - 1;\n\n    setCurrentSelectionAndStorage(insert(newIndex, obj, cleanList));\n  };\n\n  // DO NOT EXPOSE THE INTERNAL SET STATE FUNCTION, ONLY RETURN HELPERS\n  return {\n    currentSelection,\n    itemAdd,\n    itemRemove,\n    moveItemDown,\n    moveItemUp,\n  };\n};\n\nexport default useViewConfigState;\n","import React, { useCallback, useMemo } from 'react';\nimport pt from 'prop-types';\nimport classnames from 'classnames/bind';\nimport { MenuItem } from 'reakit/Menu';\nimport Button from '../../atoms/Button';\nimport { arrowDownIcon, arrowUpIcon } from '@espressive/icons';\n\nimport styles from './ViewConfig.module.scss';\n\nconst cx = classnames.bind(styles);\n\nconst propTypes = {\n  isActive: pt.bool,\n  itemAdd: pt.func.isRequired,\n  itemRemove: pt.func.isRequired,\n  label: pt.string.isRequired,\n  moveItemDown: pt.func.isRequired,\n  moveItemUp: pt.func.isRequired,\n  state: pt.shape({\n    hide: pt.func,\n    modal: pt.bool,\n    placement: pt.string,\n    preventBodyScroll: pt.boolean,\n    unstable_popperModifiers: pt.arrayOf(\n      pt.shape({\n        name: pt.string,\n        options: pt.shape({\n          offset: pt.func,\n        }),\n      })\n    ),\n  }).isRequired,\n};\n\nconst ViewConfigItem = ({\n  isActive,\n  itemAdd,\n  itemRemove,\n  label,\n  moveItemDown,\n  moveItemUp,\n  state,\n  ...rest\n}) => {\n  const originalObject = useMemo(\n    () => ({\n      label,\n      ...rest,\n    }),\n    [label, rest]\n  );\n\n  const handleItemAdd = useCallback(() => {\n    itemAdd(originalObject);\n  }, [itemAdd, originalObject]);\n\n  const handleItemRemove = useCallback(() => {\n    itemRemove(originalObject);\n  }, [itemRemove, originalObject]);\n\n  const handlemoveItemUp = useCallback(\n    (e) => {\n      e.stopPropagation();\n      moveItemUp(originalObject);\n    },\n    [moveItemUp, originalObject]\n  );\n\n  const handlemoveItemDown = useCallback(\n    (e) => {\n      e.stopPropagation();\n      moveItemDown(originalObject);\n    },\n    [moveItemDown, originalObject]\n  );\n\n  return (\n    <MenuItem\n      {...state}\n      as='div'\n      className={cx('item', ['ViewConfigItem'], { active: isActive })}\n      onClick={isActive ? handleItemRemove : handleItemAdd}\n    >\n      <span className={styles.Label}>{label}</span>\n      {isActive && (\n        <div className={styles.MoveButtons}>\n          <Button\n            aria-label='Move up'\n            icon={arrowUpIcon}\n            onClick={handlemoveItemUp}\n            size='small'\n          />\n          <Button\n            aria-label='Move down'\n            icon={arrowDownIcon}\n            onClick={handlemoveItemDown}\n            size='small'\n          />\n        </div>\n      )}\n    </MenuItem>\n  );\n};\n\nViewConfigItem.propTypes = propTypes;\n\nexport default ViewConfigItem;\n","import React, { memo, useCallback, useRef, useState } from 'react';\nimport { compose, filter, without } from 'ramda';\nimport { Menu, MenuButton, useMenuState } from 'reakit/Menu';\nimport { DEFAULT_TRIGGER, VIEW_CONFIG_PROP_TYPES } from './__globals';\nimport ViewConfigItem from './ViewConfigItem';\nimport styles from './ViewConfig.module.scss';\nimport { DEFAULT_CASCARA_MODIFIERS } from '../../lib/popperModifiers';\nimport { Clickable } from 'reakit/Clickable';\n\nconst MemoViewConfigItem = memo(ViewConfigItem);\n\nconst propTypes = VIEW_CONFIG_PROP_TYPES;\n\nconst ViewConfig = ({\n  isInitialOpen = false,\n  options,\n  placement = 'bottom-end',\n  state, // This is our component's state, not the state of the Reakit component\n  title = 'Columns',\n  trigger = DEFAULT_TRIGGER,\n}) => {\n  // Check if the state hook is being used. We do this check inside the\n  // base component so the parent error boundary will catch.\n  if (!state) {\n    throw new Error('ViewConfig requires a useViewConfigState hook.');\n  }\n\n  // Set a ref on our trigger to pass into the disclosure and also measure clientHeight\n  const triggerRef = useRef();\n\n  const [searchValue, setSearchValue] = useState('');\n\n  const menuState = useMenuState({\n    // This MUST be modal: true in order to render in a portal or else we\n    // will have problems with any menus rendered inside of positioned\n    // elements other than \"relative\"\n    modal: true,\n    placement,\n    preventBodyScroll: true,\n    unstable_popperModifiers: DEFAULT_CASCARA_MODIFIERS,\n    visible: isInitialOpen,\n  });\n\n  const { currentSelection: activeOptions = [] } = state;\n\n  const hasMatch = ({ label }) =>\n    searchValue\n      ? // This uses a regex to do a case insensitive match\n        label.match(new RegExp(searchValue, 'i'))\n      : true;\n\n  const filteredInactiveOptions = compose(\n    without(activeOptions),\n    filter(hasMatch)\n  )(options);\n\n  const renderOptions = (options, isSelected) =>\n    options.map((option) => {\n      const { currentSelection, ...setterFunctions } = state;\n      return (\n        <MemoViewConfigItem\n          {...option}\n          {...setterFunctions}\n          isActive={isSelected}\n          key={option.label}\n          state={menuState}\n        />\n      );\n    });\n\n  const handleSearchValue = useCallback((e) => {\n    setSearchValue(e.target.value);\n  }, []);\n\n  const handleClearSearch = useCallback(() => {\n    setSearchValue('');\n  }, []);\n\n  // Do not render anything if we have not passed any options\n  return options ? (\n    <>\n      <MenuButton {...menuState} {...trigger.props} ref={triggerRef}>\n        {(disclosureProps) => React.cloneElement(trigger, disclosureProps)}\n      </MenuButton>\n      <Menu\n        {...menuState}\n        aria-label='options menu'\n        className={`ui dropdown active visible ${styles._}`}\n        tabIndex={0}\n      >\n        <div\n          className={'menu transition visible'}\n          style={{ position: 'initial' }}\n        >\n          {title && <h4 className={styles.Title}>{title}</h4>}\n\n          {activeOptions.length > 0 && (\n            <div className={styles.ActiveItems}>\n              {renderOptions(activeOptions, true)}\n            </div>\n          )}\n\n          <div className='ui icon input'>\n            {searchValue && (\n              <Clickable\n                as='i'\n                className='close icon'\n                onClick={handleClearSearch}\n                onKeyDown={handleClearSearch}\n                role='button'\n                style={{ cursor: 'pointer', opacity: 1, pointerEvents: 'all' }}\n                tabIndex={0}\n              />\n            )}\n            <input\n              onChange={handleSearchValue}\n              placeholder='Search...'\n              type='search'\n              value={searchValue}\n            />\n          </div>\n\n          {filteredInactiveOptions.length > 0 ? (\n            renderOptions(filteredInactiveOptions)\n          ) : (\n            <div className={styles.Info}>\n              {searchValue ? <em>No results</em> : <em>All selected</em>}\n            </div>\n          )}\n        </div>\n      </Menu>\n    </>\n  ) : null;\n};\n\nViewConfig.propTypes = propTypes;\n\nexport default ViewConfig;\n","import React from 'react';\nimport Boundaries from '../../system-components/Boundaries';\nimport ViewConfigBase from './ViewConfigBase';\nimport { LOADING_TRIGGER, VIEW_CONFIG_PROP_TYPES } from './__globals';\n\nconst propTypes = VIEW_CONFIG_PROP_TYPES;\n\nconst ViewConfig = (props) => {\n  const {\n    options,\n    // state, // This is our component's state, not the state of the Reakit component\n  } = props;\n\n  // Render the loading version of the trigger if no options are defined yet.\n  return (\n    <Boundaries>\n      {options ? <ViewConfigBase {...props} /> : LOADING_TRIGGER}\n    </Boundaries>\n  );\n};\n\nViewConfig.propTypes = propTypes;\n\nexport default ViewConfig;\n","import React, { useCallback, useContext } from 'react';\nimport pt from 'prop-types';\n\nimport { ModuleContext } from '../../../../modules/context';\nimport { Button } from 'reakit';\nimport { InlineIcon } from '@iconify/react';\nimport { checkIcon, closeIcon, pencilIcon } from '@espressive/icons';\n// import Tooltip from '../../ui/Tooltip';\n\nconst propTypes = {\n  /** An optional text label for the cancel button */\n  cancelLabel: pt.node,\n  /** An optional text label for the edit button */\n  editLabel: pt.node,\n  /** An optional text label for the save button */\n  saveLabel: pt.node,\n};\n\nconst DEFAULT_EDIT = <InlineIcon icon={pencilIcon} />;\nconst DEFAULT_CANCEL = <InlineIcon icon={closeIcon} />;\nconst DEFAULT_SAVE = <InlineIcon icon={checkIcon} />;\n\nconst ActionEdit = ({\n  cancelLabel = DEFAULT_CANCEL,\n  editLabel = DEFAULT_EDIT,\n  saveLabel = DEFAULT_SAVE,\n}) => {\n  const {\n    idOfRecordInEditMode,\n    isEditing,\n    enterEditMode,\n    exitEditMode,\n    formMethods,\n    record,\n    onAction,\n    uniqueIdAttribute,\n  } = useContext(ModuleContext);\n  const { handleSubmit, formState, reset } = formMethods;\n  const { isDirty, isSubmitting } = formState;\n  const recordId = uniqueIdAttribute && record && record[uniqueIdAttribute];\n  const whenAnotherRowIsEditing = Boolean(idOfRecordInEditMode);\n\n  const handleReset = useCallback(() => {\n    if (typeof onAction === 'function') {\n      onAction(\n        // fake target\n        {\n          name: 'edit.cancel',\n        },\n        {\n          ...record,\n        }\n      );\n    }\n    exitEditMode();\n  }, [exitEditMode, onAction, record]);\n\n  const handleCancel = useCallback(() => {\n    isDirty\n      ? // eslint-disable-next-line no-restricted-globals, no-alert -- For now we do not have our own confirmation dialog so we are using native confirms\n        confirm('Abandon unsaved changes?') && handleReset()\n      : handleReset();\n  }, [handleReset, isDirty]);\n\n  const handleEdit = useCallback(() => {\n    // FDS-91: We are resetting the form with whatever is in record.\n    // We don't know if this is the best way to do it in React.\n    reset({ ...record });\n\n    if (typeof onAction === 'function') {\n      onAction(\n        // fake target\n        {\n          name: 'edit.start',\n        },\n        {\n          ...record,\n        }\n      );\n    }\n    enterEditMode && enterEditMode(recordId);\n  }, [enterEditMode, onAction, record, recordId, reset]);\n\n  const onSubmit = useCallback(\n    (data) => {\n      if (typeof onAction === 'function') {\n        onAction(\n          // fake target\n          {\n            name: 'edit.save',\n          },\n          {\n            ...record,\n            ...data,\n          }\n        );\n      }\n      exitEditMode && exitEditMode();\n    },\n    [exitEditMode, onAction, record]\n  );\n\n  return isEditing ? (\n    <>\n      <Button\n        aria-label='Cancel'\n        className='ui negative icon button'\n        disabled={isSubmitting}\n        name='edit.cancel'\n        onClick={handleCancel}\n        type='button'\n      >\n        {cancelLabel}\n      </Button>\n      <Button\n        aria-label='Save'\n        className='ui positive icon button'\n        disabled={!isDirty || isSubmitting}\n        name='edit.save'\n        onClick={handleSubmit(onSubmit)}\n        type='button'\n      >\n        {saveLabel}\n      </Button>\n    </>\n  ) : (\n    <Button\n      aria-label='Edit'\n      className='ui basic icon button'\n      disabled={whenAnotherRowIsEditing}\n      name='edit.start'\n      onClick={handleEdit}\n      type='button'\n    >\n      {editLabel}\n    </Button>\n  );\n};\n\nActionEdit.propTypes = propTypes;\n\nexport { propTypes };\nexport default ActionEdit;\n"],"names":["useBoolean","defaultValue","useState","value","setValue","toggle","setTrue","setFalse","propTypes","children","pt","oneOfType","node","array","isEditing","bool","record","shape","ModuleSandbox","idOfRecordInEditMode","uniqueIdAttribute","state","setState","enterEditMode","useCallback","exitEditMode","handleSubmit","data","console","log","reset","onAction","action","name","formMethods","formState","isDirty","isSubmitting","cx","classNames","bind","styles","arrayOf","className","string","trigger","Popover","rest","triggerRef","useRef","popover","usePopoverState","gutter","modal","placement","unstable_popperModifiers","popperOverTrigger","props","disclosureProps","React","cloneElement","ReakitPopover","Backdrop","DEFAULT_TRIGGER","_","eyeIcon","LOADING_TRIGGER","STATE_SHAPE","exact","currentSelection","object","itemAdd","func","isRequired","itemRemove","moveItemDown","moveItemUp","VIEW_CONFIG_PROP_TYPES","isInitialOpen","options","oneOf","title","LOCAL_STORAGE_KEY","window","location","pathname","getObjectIndex","obj","list","findIndex","equals","getCleanList","without","getObjIndexAndCleanList","cleanList","prevIndex","useViewConfigState","initialSelection","lastFilter","JSON","parse","localStorage","getItem","initial","useInitialValue","setCurrentSelection","setCurrentSelectionAndStorage","val","length","removeItem","setItem","stringify","newIndex","insert","classnames","isActive","label","hide","preventBodyScroll","offset","ViewConfigItem","originalObject","useMemo","handleItemAdd","handleItemRemove","handlemoveItemUp","e","stopPropagation","handlemoveItemDown","active","Label","MoveButtons","Button","arrowUpIcon","arrowDownIcon","MemoViewConfigItem","memo","ViewConfig","Error","searchValue","setSearchValue","menuState","useMenuState","DEFAULT_CASCARA_MODIFIERS","visible","activeOptions","hasMatch","match","RegExp","filteredInactiveOptions","compose","filter","renderOptions","isSelected","map","option","setterFunctions","handleSearchValue","target","handleClearSearch","position","Title","ActiveItems","cursor","opacity","pointerEvents","Info","ViewConfigBase","cancelLabel","editLabel","saveLabel","DEFAULT_EDIT","pencilIcon","DEFAULT_CANCEL","closeIcon","DEFAULT_SAVE","checkIcon","ActionEdit","useContext","ModuleContext","recordId","whenAnotherRowIsEditing","Boolean","handleReset","handleCancel","confirm","handleEdit","onSubmit"],"mappings":"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"}